@if (movie(); as movieItem) {
  <section class="movie-details">
    <back-button class="movie-details-back" />
    <div class="movie-details-hero">
      <image-with-loader
        [src]="getHeroUrl(movieItem.backdrop_path)"
        [placeholderSrc]="getPosterPlaceholder(movieItem.backdrop_path)"
        [alt]="movieItem.title"
        [placeholder]="'https://placehold.co/1600x900?text=No+Backdrop'"
        [fit]="'cover'"
        [aspectRatio]="'16 / 9'"
      />
      <div class="overlay"></div>
    </div>

    <div class="movie-details-content">
      <div class="movie-details-poster">
        <image-with-loader
          [src]="getPosterUrl(movieItem.poster_path)"
          [placeholderSrc]="getPosterPlaceholder(movieItem.poster_path)"
          [alt]="movieItem.title"
          [placeholder]="'https://placehold.co/400x600?text=No+Poster'"
          [fit]="'cover'"
        />
      </div>

      <div class="movie-details-info">
        <h1>{{ movieItem.title }}</h1>
        <div class="movie-details-meta">
          <span>{{ movieItem.release_date | slice: 0 : 4 }}</span>
          <span>•</span>
          <span>{{ movieItem.runtime || '—' }} min</span>
          <span>•</span>
          <span>{{ movieItem.vote_average }}</span>
        </div>
        <div class="movie-details-genres">
          @for (genre of movieItem.genres; track genre.id) {
            <span>{{ genre.name }}</span>
          }
        </div>
        <p class="movie-details-overview">{{ movieItem.overview }}</p>
        <button mat-raised-button class="movie-details-watch-now-btn">
          <mat-icon>play_arrow</mat-icon>
          Watch Now
        </button>
      </div>
    </div>
  </section>
} @else {
  <section class="movie-details-state">
    @if (isLoading()) {
      <div class="movie-details-loading">
        <mat-progress-spinner mode="indeterminate" diameter="52"></mat-progress-spinner>
        <span>Loading movie…</span>
      </div>
    } @else {
      <div class="movie-details-empty">
        <h4>Movie not available</h4>
        <p>Try going back and selecting another title.</p>
      </div>
    }
  </section>
}
